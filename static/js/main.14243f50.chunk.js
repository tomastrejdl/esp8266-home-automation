(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(9),r=a.n(s),o=(a(16),a(1)),i=a(2),c=a(4),d=a(3),u=a(5),p=a(6),m=(a(17),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"led"},l.a.createElement("label",{className:"mdl-switch mdl-js-switch mdl-js-ripple-effect",htmlFor:this.props.led.id},l.a.createElement("input",{type:"checkbox",id:this.props.led.id,className:"mdl-switch__input",defaultChecked:1===this.props.led.value,onChange:this.props.handleLedSwitchToggle}),l.a.createElement("span",{className:"mdl-switch__label"},this.props.led.name)))}}]),t}(n.Component)),h=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"navbar"},l.a.createElement("div",{className:"navbar__icons"},l.a.createElement("i",{className:"material-icons navbar__icons__icon-cw"},"settings"),l.a.createElement("i",{className:"material-icons navbar__icons__icon-ccw"},"settings")),l.a.createElement("h1",{className:"navbar__title"},"ESP8266 Home Automation"," ",l.a.createElement("span",{className:"navbar__title__version"},"preALPHA")))}}]),t}(n.Component),v=function(e){var t=e.onEspIpChange,a=e.handleConnectClick,n=e.espIpDefaultValue;return l.a.createElement("div",null,l.a.createElement("div",{className:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label"},l.a.createElement("input",{className:"mdl-textfield__input",type:"text",id:"esp_ip",defaultValue:n,onChange:t}),l.a.createElement("label",{className:"mdl-textfield__label",htmlFor:"esp_ip"},"ESP IP")),l.a.createElement("button",{type:"button",className:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored",onClick:a},"Connect"))},f=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"servo"},l.a.createElement("label",{htmlFor:this.props.servo.id},this.props.servo.name),l.a.createElement("input",{id:this.props.servo.id,className:"mdl-slider mdl-js-slider",type:"range",min:"10",max:"170",tabIndex:"0",defaultValue:this.props.servo.value,onMouseUp:this.props.handleServoAngleChange,onTouchEnd:this.props.handleServoAngleChange}))}}]),t}(n.Component),b=function(e){var t=e.handleConnectClick;return l.a.createElement("button",{type:"button",className:"mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored add-control-button",onClick:t},l.a.createElement("i",{className:"material-icons"},"add"))},g=(a(8),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).connectToEsp=function(){var t=e.state.espIp;if(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)){var a=new XMLHttpRequest;a.open("GET","http://"+t+":80/status",!0),a.onreadystatechange=e.createCallback(Object(p.a)(Object(p.a)(e))),a.send()}else alert("Enter a valid IPv4 address!")},e.handleServoAngleChange=function(t){var a=t.target.value,n=t.target.id,l=e.state.espIp;if(performance.now()-e.lastMove>100){var s=new XMLHttpRequest;s.open("GET","http://"+l+":80/servo?servoId="+n+"&angle="+a,!0),s.send(),e.lastMove=performance.now(),console.log("move")}var r=e.state.servos.indexOf(e.state.servos.filter(function(e){return e.id===n})[0]),o=e.state.servos;o[r].value=a,e.setState({servos:o})},e.handleLedSwitchToggle=function(t){var a=!0===t.target.checked?1:0,n=t.target.id,l=e.state.espIp,s=new XMLHttpRequest;s.open("GET","http://"+l+":80/led?ledId="+n+"&value="+a,!0),s.send();var r=e.state.leds.indexOf(e.state.leds.filter(function(e){return e.id===n})[0]),o=e.state.leds;o[r].value=a,e.setState({leds:o})},e.onEspIpChange=function(t){e.setState({espIp:t.target.value})},e.state={espIp:"192.168.0.105",servos:[{id:"servo_1",name:"Blinds left",value:20},{id:"servo_2",name:"Blinds right",value:150}],leds:[{id:"led_1",name:"Desk light",value:1},{id:"led_2",name:"Ceiling light",value:0}]},e.lastMove=1e3,e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"createCallback",value:function(e){return function(){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.responseText);console.log(t);var a={servos:[],leds:[]},n=!0,l=!1,s=void 0;try{for(var r,o=t.servos[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var i=r.value;a.servos.push(i)}}catch(v){l=!0,s=v}finally{try{n||null==o.return||o.return()}finally{if(l)throw s}}var c=!0,d=!1,u=void 0;try{for(var p,m=t.leds[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var h=p.value;a.leds.push(h)}}catch(v){d=!0,u=v}finally{try{c||null==m.return||m.return()}finally{if(d)throw u}}e.setState(a)}}}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"app"},l.a.createElement("header",{className:"app__header"},l.a.createElement(h,null),l.a.createElement(v,{handleConnectClick:this.connectToEsp,onEspIpChange:this.onEspIpChange,espIpDefaultValue:this.state.espIp})),l.a.createElement("main",{className:"app__content"},l.a.createElement("div",{className:"servos"},this.state.servos.map(function(t){return l.a.createElement(f,{key:t.id,servo:t,handleServoAngleChange:e.handleServoAngleChange})})),l.a.createElement("div",{className:"leds"},this.state.leds.map(function(t){return l.a.createElement(m,{key:t.id,led:t,handleLedSwitchToggle:e.handleLedSwitchToggle})})),l.a.createElement(b,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t){}},[[10,1,2]]]);
//# sourceMappingURL=main.14243f50.chunk.js.map